#usb-Klipper_rp2040_5044506128A1CB1C-if00
[include sensors.cfg]
[include eddy.cfg] # comment out when swapping to shaper
[include led.cfg]
[include fluidd.cfg]
[include speed.cfg]
[include test.cfg]
[include macros.cfg]
#[include shaper.cfg] # comment out when not connected 
[include Ebb42.cfg]
[include KAMP_Settings.cfg]
[force_move]
enable_force_move: True

[exclude_object] 

[respond]

[virtual_sdcard]

path: /home/nastic/printer_data/gcodes
on_error_gcode: CANCEL_PRINT


# This file contains common pin mappings for the BIGTREETECH SKR Pico V1.0
# To use this config, the firmware should be compiled for the RP2040 with
# USB communication.

# The "make flash" command does not work on the SKR Pico V1.0. Instead,
# after running "make", copy the generated "out/klipper.uf2" file
# to the mass storage device in RP2040 boot mode

# See docs/Config_Reference.md for a description of parameters.

[stepper_x]
step_pin: gpio11
dir_pin: !gpio10
enable_pin: !gpio12
microsteps: 16
rotation_distance: 40
endstop_pin: tmc2209_stepper_x:virtual_endstop #^gpio4
position_endstop: -10
position_min: -10
position_max: 270
homing_speed: 50
homing_retract_dist: 0

[tmc2209 stepper_x]
uart_pin: gpio9
tx_pin: gpio8
diag_pin: ^gpio4
driver_SGTHRS: 130  # 255 is most sensitive value, 0 is least sensitive
uart_address: 0
run_current: 0.580
stealthchop_threshold: 999999

[stepper_y]
step_pin: gpio6
dir_pin: !gpio5
enable_pin: !gpio7
microsteps: 16
rotation_distance: 40
endstop_pin: tmc2209_stepper_y:virtual_endstop #^gpio3
position_min: 0
position_endstop: 0
position_max: 308
homing_speed: 50
homing_retract_dist: 0

[tmc2209 stepper_y]
uart_pin: gpio9
tx_pin: gpio8
diag_pin: ^gpio3
driver_SGTHRS: 130  # 255 is most sensitive value, 0 is least sensitive
uart_address: 2
run_current: 0.580
stealthchop_threshold: 999999

[stepper_z1]
step_pin: gpio19
dir_pin: gpio28
enable_pin: !gpio2
microsteps: 16
rotation_distance: 8
endstop_pin: probe:z_virtual_endstop
#endstop_pin: gpio25 # for eddyless
#position_endstop: 0.0 # for eddyless
#position_max: 300
#homing_speed: 50

[tmc2209 stepper_z1]
uart_pin: gpio9
tx_pin: gpio8
#diag_pin: ^gpio25
#driver_SGTHRS: 100  # 255 is most sensitive value, 0 is least sensitive
uart_address: 1
run_current: 0.580
stealthchop_threshold: 999999

[stepper_z] #[extruder1]
step_pin: gpio14
dir_pin: gpio13
enable_pin: !gpio15
microsteps: 16
rotation_distance: 8
endstop_pin: probe:z_virtual_endstop
#endstop_pin: gpio25 # for eddyless
#position_endstop: 0.0 # for eddyless
position_max: 300
homing_speed: 50
#nozzle_diameter: 0.400
#filament_diameter: 1.750
#heater_pin: gpio23
#sensor_type: EPCOS 100K B57560G104F
#sensor_pin: gpio27
#control: pid
#pid_Kp: 21.527
#pid_Ki: 1.063
#pid_Kd: 108.982
#min_temp: -50
#max_temp: 250

[tmc2209 stepper_z] #[tmc2209 extruder1]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 3
run_current: 0.58
stealthchop_threshold: 999999

[heater_bed]
heater_pin: gpio21
sensor_type: ATC Semitec 104GT-2
sensor_pin: gpio26
#control: pid
#pid_Kp: 54.027
#pid_Ki: 0.770
#pid_Kd: 948.182
min_temp: -50
max_temp: 130

#[fan]
#pin: gpio18

[temperature_fan Rpi_fan]
pin: gpio18
sensor_type: temperature_host
target_temp: 65
min_temp: 0
max_temp:80
control: watermark

#[heater_fan controller_fan]
#pin: gpio17
[temperature_fan BTT_PICO_FAN]
pin: gpio17
sensor_type: temperature_mcu
sensor_mcu: mcu
control: watermark
min_temp: 10
max_temp: 80
target_temp: 35

[mcu]
canbus_uuid: e97fc5a4ddb0
#serial: /dev/serial0
#restart_method: command

[printer]
kinematics: cartesian
max_velocity: 300
max_accel: 2700
max_z_velocity: 5
max_z_accel: 100

[input_shaper]
#shaper_freq_x: 62.8
#shaper_type_x: mzv
#shaper_freq_y: 30.0
#shaper_type_y: mzv

[bed_screws]
screw1: 50, 50
screw2: 255, 75
screw3: 50, 270
screw4: 255, 270

[screws_tilt_adjust]
screw1: 70, 75
screw1_name: front left screw
screw2: 265, 75
screw2_name: front right screw psu
screw3: 265, 290
screw3_name: rear right screw psu
screw4: 70, 290
screw4_name: rear left screw
horizontal_move_z: 10.
speed: 100.
screw_thread: CW-M4

#[z_tilt]
#z_positions:
# 50,150
# 265,150
#points:
# 75,150
# 265,150
#retries: 20
#retry_tolerance: 0.01

#[filament_switch_sensor runout_sensor]
#switch_pin: ^gpio16

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [probe_eddy_current btt_eddy]
#*# reg_drive_current = 15
#*# calibrate =
#*# 	0.050000:3248788.921,0.090000:3248061.436,0.130000:3247323.219,
#*# 	0.170000:3246527.065,0.210000:3245729.256,0.250000:3244987.534,
#*# 	0.290000:3244212.338,0.330000:3243452.700,0.370000:3242695.063,
#*# 	0.410000:3241991.633,0.450000:3241308.492,0.490000:3240581.964,
#*# 	0.530000:3239913.232,0.570000:3239229.405,0.610000:3238590.515,
#*# 	0.650000:3237958.636,0.690000:3237335.435,0.730000:3236691.378,
#*# 	0.770000:3236100.412,0.810000:3235506.878,0.850000:3234919.309,
#*# 	0.890000:3234350.431,0.930000:3233808.987,0.970000:3233249.069,
#*# 	1.010000:3232719.365,1.050000:3232192.061,1.090000:3231676.353,
#*# 	1.130000:3231138.686,1.170000:3230660.786,1.210000:3230150.199,
#*# 	1.250000:3229696.709,1.290000:3229224.334,1.330000:3228767.062,
#*# 	1.370000:3228308.127,1.410000:3227870.346,1.450000:3227456.809,
#*# 	1.490000:3227016.208,1.530000:3226595.886,1.570000:3226201.488,
#*# 	1.610000:3225777.900,1.650000:3225357.243,1.690000:3224971.367,
#*# 	1.730000:3224585.748,1.770000:3224190.230,1.810000:3223850.451,
#*# 	1.850000:3223468.573,1.890000:3223099.880,1.930000:3222757.295,
#*# 	1.970000:3222423.341,2.010000:3222077.184,2.050000:3221724.921,
#*# 	2.090000:3221409.462,2.130000:3221103.490,2.170000:3220768.295,
#*# 	2.210000:3220478.594,2.250000:3220151.051,2.290000:3219854.124,
#*# 	2.330000:3219545.319,2.370000:3219277.432,2.410000:3218973.743,
#*# 	2.450000:3218697.647,2.490000:3218409.173,2.530000:3218174.127,
#*# 	2.570000:3217895.974,2.610000:3217648.217,2.650000:3217379.006,
#*# 	2.690000:3217121.758,2.730000:3216872.070,2.770000:3216616.445,
#*# 	2.810000:3216379.387,2.850000:3216155.831,2.890000:3215894.560,
#*# 	2.930000:3215706.668,2.970000:3215473.873,3.010000:3215265.216,
#*# 	3.050000:3215015.134,3.090000:3214812.189,3.130000:3214603.985,
#*# 	3.170000:3214412.213,3.210000:3214216.737,3.250000:3214029.338,
#*# 	3.290000:3213832.000,3.330000:3213653.761,3.370000:3213453.334,
#*# 	3.410000:3213293.670,3.450000:3213112.207,3.490000:3212937.691,
#*# 	3.530000:3212748.765,3.570000:3212588.735,3.610000:3212405.396,
#*# 	3.650000:3212276.718,3.690000:3212082.215,3.730000:3211921.102,
#*# 	3.770000:3211776.096,3.810000:3211612.551,3.850000:3211452.635,
#*# 	3.890000:3211317.574,3.930000:3211173.175,3.970000:3211020.391,
#*# 	4.010000:3210870.211,4.050000:3210730.279
#*# z_offset = 2.851
#*#
#*# [temperature_probe BTT_EDDY]
#*# calibration_temp = 30.612918
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 74.0
#*# shaper_type_y = mzv
#*# shaper_freq_y = 29.0
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.039047, -0.050920, -0.057025, -0.065913, -0.059440, -0.079167, -0.058837, -0.034721, -0.009010, -0.014741, -0.025660, -0.022061, -0.022291, -0.022610, -0.015871, 0.009898, 0.022357, 0.004614, 0.030311, 0.053056
#*# 	0.019565, -0.006182, -0.013666, -0.021382, -0.010806, -0.023963, -0.029842, -0.038076, -0.031706, -0.024997, -0.036162, -0.037001, -0.043843, -0.039517, -0.017322, -0.004388, 0.028904, 0.037397, 0.071029, 0.091197
#*# 	-0.004829, -0.024652, -0.019020, -0.029595, -0.032886, -0.046490, -0.033411, -0.042872, -0.031601, -0.033175, -0.041562, -0.036765, -0.036634, -0.038783, -0.014395, 0.007319, 0.038243, 0.055580, 0.090441, 0.117341
#*# 	-0.051760, -0.068193, -0.073358, -0.088659, -0.078167, -0.083194, -0.089221, -0.083850, -0.076387, -0.069826, -0.063763, -0.063163, -0.057394, -0.054407, -0.028366, -0.004953, 0.030945, 0.048351, 0.085553, 0.112591
#*# 	-0.054642, -0.074796, -0.081384, -0.078605, -0.086879, -0.104960, -0.092251, -0.091439, -0.081946, -0.068192, -0.070455, -0.054774, -0.045049, -0.050553, -0.023865, 0.005401, 0.037395, 0.065079, 0.100337, 0.119937
#*# 	-0.021946, -0.044683, -0.046122, -0.063396, -0.066280, -0.085754, -0.081850, -0.087660, -0.081727, -0.069164, -0.078823, -0.071454, -0.049522, -0.062056, -0.037237, -0.013510, 0.020643, 0.028691, 0.075377, 0.092922
#*# 	-0.037736, -0.043240, -0.040592, -0.050552, -0.065912, -0.096156, -0.088318, -0.092002, -0.089659, -0.077948, -0.076605, -0.073888, -0.065309, -0.058468, -0.043947, -0.016438, 0.020105, 0.039225, 0.060032, 0.083031
#*# 	-0.029374, -0.035428, -0.027358, -0.037971, -0.049845, -0.088316, -0.096809, -0.100400, -0.097717, -0.088097, -0.087754, -0.080385, -0.081728, -0.076262, -0.061484, -0.036555, 0.006289, 0.010014, 0.045116, 0.064956
#*# 	-0.043975, -0.041063, -0.029055, -0.037001, -0.052229, -0.091687, -0.107428, -0.113823, -0.104991, -0.101525, -0.090907, -0.083756, -0.091127, -0.083289, -0.066986, -0.049244, -0.012945, 0.010014, 0.028598, 0.048987
#*# 	-0.038443, -0.047287, -0.037840, -0.044069, -0.057393, -0.096060, -0.109426, -0.122124, -0.106427, -0.106085, -0.109894, -0.104179, -0.104399, -0.102400, -0.094125, -0.070455, -0.027800, -0.007879, 0.018814, 0.039976
#*# 	-0.055716, -0.052596, -0.049478, -0.059674, -0.072795, -0.109323, -0.105305, -0.115395, -0.106428, -0.109333, -0.102743, -0.100837, -0.103743, -0.101057, -0.089439, -0.056790, -0.022857, -0.001239, 0.015811, 0.039861
#*# 	-0.041091, -0.051523, -0.059807, -0.064603, -0.070672, -0.097372, -0.110332, -0.124389, -0.114263, -0.118318, -0.115051, -0.115082, -0.112470, -0.111557, -0.091002, -0.065072, -0.034956, -0.018798, 0.021183, 0.032351
#*# 	-0.023299, -0.043372, -0.053683, -0.057630, -0.069768, -0.090782, -0.096029, -0.106210, -0.108769, -0.108209, -0.106770, -0.111120, -0.111339, -0.106427, -0.092126, -0.061485, -0.027455, -0.007634, 0.011939, 0.032351
#*# 	0.003383, -0.021159, -0.036634, -0.046829, -0.046962, -0.063999, -0.086756, -0.093906, -0.102525, -0.104522, -0.119546, -0.113968, -0.120111, -0.128519, -0.108208, -0.073358, -0.053671, -0.028808, -0.000673, 0.024608
#*# 	0.019893, -0.017446, -0.020938, -0.030161, -0.035559, -0.056556, -0.066751, -0.080509, -0.085413, -0.094811, -0.104867, -0.105303, -0.111340, -0.113351, -0.095624, -0.067825, -0.039649, -0.012036, 0.007884, 0.035683
#*# 	-0.013732, -0.033043, -0.048875, -0.056320, -0.051290, -0.067355, -0.075357, -0.090220, -0.094812, -0.101837, -0.113477, -0.117753, -0.113382, -0.121904, -0.106949, -0.081852, -0.047801, -0.025439, 0.027613, 0.049416
#*# 	-0.024086, -0.046698, -0.061351, -0.063632, -0.070453, -0.079509, -0.083508, -0.091002, -0.094468, -0.097413, -0.105304, -0.106427, -0.107208, -0.108208, -0.091345, -0.067119, -0.034721, -0.002026, 0.038052, 0.083256
#*# 	-0.056688, -0.075702, -0.083850, -0.099713, -0.087129, -0.099495, -0.110899, -0.108645, -0.102838, -0.101275, -0.112472, -0.108646, -0.109989, -0.117188, -0.091251, -0.066148, -0.040120, -0.004166, 0.048353, 0.098658
#*# 	-0.044314, -0.065911, -0.064547, -0.078386, -0.086755, -0.093906, -0.098373, -0.096373, -0.088223, -0.096591, -0.093906, -0.098277, -0.099277, -0.098372, -0.085536, -0.069032, -0.024652, 0.005401, 0.036105, 0.083154
#*# 	-0.023078, -0.049243, -0.062558, -0.072014, -0.072139, -0.082166, -0.088784, -0.085880, -0.084632, -0.084975, -0.091001, -0.091459, -0.095811, -0.097934, -0.084194, -0.059807, -0.039885, -0.019585, 0.025148, 0.054309
#*# x_count = 20
#*# y_count = 20
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 30.0
#*# max_x = 209.93
#*# min_y = 30.0
#*# max_y = 209.92999999999998
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 61.632
#*# pid_ki = 0.897
#*# pid_kd = 1058.530
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 36.857
#*# pid_ki = 12.932
#*# pid_kd = 26.261
